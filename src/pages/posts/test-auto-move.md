---
layout: ../../layouts/PostLayout.astro
title: test-auto-move 自動化你的測試檔案搬移
date: 2026-01-16T06:39
description: 一個解決在大型專案中手動搬移測試檔案痛苦的小工具。
tags:
  - testing
  - automation
  - nodejs
---

最近在搞一個大型的 monorepo 專案，檔案結構變得越來越複雜。

每次新增一個 component，就要手動在 `__tests__` 資料夾裡面建立對應的測試檔案。
如果 component 的路徑變了，測試檔案也要跟著手動搬家。

一開始還好，檔案少的時候不覺得怎麼樣。
但隨著專案長大，component 越來越多，這件事變得超級煩。

常常改個資料夾名稱，就忘了搬測試檔案，CI/CD 就直接噴錯。
不然就是手動建立檔案的時候，路徑一不小心就打錯。

我受夠了。

## 尋找解法

我開始想，這件事一定可以自動化。
我需要一個工具，可以監控檔案系統的變化，自動幫我做這些事：

- 當我新增一個 component 時，自動在 `__tests__` 中建立對應的測試檔案樣板。
- 當我移動 component 時，自動把對應的測試檔案也搬過去。
- 當我刪除 component 時，自動把測試檔案也刪掉。

找了一圈，沒有看到完全符合我需求的現成工具。
很多 testing framework 有自己的 codegen，但通常只負責初始化。

## 所以我做了 test-auto-move

既然找不到，那就自己寫一個吧。

我用 Node.js 和 `chokidar` 這個 library，寫了一個小小的 script，就叫做 `test-auto-move`。

它的邏輯很簡單：
1.  用 `chokidar` 監控 `src` 資料夾的檔案變化。
2.  監聽到檔案新增、移動、刪除事件時，就去對應的 `__tests__` 資料夾做一樣的操作。
3.  如果是新增檔案，就讀取一個預設的測試樣板，填上 component 的名字，然後寫入新的測試檔案。

跑起來之後，整個世界都清靜了。

我現在只要專心寫我的 component 就好，測試檔案會自己長出來、自己搬家、自己消失。
再也不用擔心手殘打錯路徑，也不用在資料夾之間跳來跳去。

## 小結

這個小工具解決了我一個很大的痛點。
有時候，一些簡單的自動化 script，就能省下大量的時間和心力。

如果你也有一樣的困擾，不妨也試著寫一個自己的小工具吧。
